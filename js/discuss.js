function mark_all_read(e,t){$.ajax({url:"/include/ajax_handler.php",data:{action:"discuss_mark_read",forum_id:e,user_id:t},type:"post",success:function(){$(".topic-icon.unread-icon").removeClass("unread-icon").addClass("read-icon"),$(".msg").html("All posts have been marked as read."),$(".msg").fadeIn(300),setTimeout(function(){$(".msg").fadeOut(2e3)},5e3)}})}$(function(){$(".discuss-announcement").each(function(){$(this).attr("title",$(this).text())}),$("#fora > a").mousedown(function(e){e.preventDefault()}),$("[name='title']").keyup(function(e){var t=new Message($(this)),a="which"in e?e.which:e.keyCode;(a>47&&60>a||a>64&&91>a||a>95&&112>a||a>185&&193>a||a>218&&223>a||32==a||8==a||13==a||46==a)&&(null===$(this).val().match(/\S/g)||$(this).val().match(/\S/g).length<5?(t.assign("The title must have at least 5 characters (excluding whitespace)","error").show(),$("#post").prop("disabled","disabled")):$(this).val().length>64?(t.assign("The title cannot have more than 64 characters","error").show(),$("#post").prop("disabled","disabled")):(t.purge(),null!==$("[name='desc-source']").val().match(/\S/g)&&$("[name='desc-source']").val().match(/\S/g).length>=10&&$("#post").prop("disabled","")))}),$("[name='desc-source']").keyup(function(e){var t=new Message($(this)),a="which"in e?e.which:e.keyCode;(a>47&&60>a||a>64&&91>a||a>95&&112>a||a>185&&193>a||a>218&&223>a||32==a||8==a||13==a||46==a)&&(null===$(this).val().match(/\S/g)||$(this).val().match(/\S/g).length<10?(t.assign("The message must have at least 10 characters (excluding whitespace)","error").show(function(){$("[name='desc-source']").next().css({top:0,bottom:"auto"})}),$("#post").prop("disabled","disabled"),$(this).parent().parent().parent().children(".post-edit").prop("disabled","disabled")):$(this).val().length>4e4?(t.assign("The message cannot have more than 40000 characters","error").show(function(){$("[name='desc-source']").next().css({top:0,bottom:"auto"})}),$("#post").prop("disabled","disabled"),$(this).parent().parent().parent().children(".post-edit").prop("disabled","disabled")):(t.purge(),$(this).parent().next().children("[name='preview']").html(marked($(this).val(),markedOptions)),Prism.highlightAll(document.querySelector("[name='preview'] pre")),null!==$("[name='title']").val().match(/\S/g)&&$("[name='title']").val().match(/\S/g).length>=5&&($("#post").prop("disabled",""),$(this).parent().parent().parent().children(".post-edit").prop("disabled",""))))}),$("[name='desc-source']").keydown(function(e){10!=e.keyCode&&13!=e.keyCode||!e.ctrlKey&&224!=e.keyCode&&17!=e.keyCode&&91!=e.keyCode||$("#post").is("[disabled]")||$(this).parent().parent().next().next().trigger("click")}),$("[name='title'], [name='desc-source']").keydown(function(e){27==e.keyCode&&$(this).parents("form").children(".cancel").trigger("click")})});var markedOptions={sanitize:!0,breaks:!0};