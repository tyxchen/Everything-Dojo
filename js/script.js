function Message(e){if("string"==typeof e)this.el=document.querySelector(e);else if(e instanceof jQuery)this.el=e.context;else{if(!(e instanceof Element))throw new Error("selector does not refer to an element.");this.el=e}}function sliderHeader(){var e=$("header").attr("class"),t=$("header").height();$("header").css("position","absolute").append('<div id="header-button" class="slideButton down '+e+'"></div>');var i=!0;$("header").addClass("opened"),$("#header-button").click(function(){i?($("header").animate({top:-t},400,function(){$(this).removeClass("opened").addClass("closed")}),$(this).animate({top:t},400),i=!1):($("header").removeClass("closed").addClass("opened").animate({top:0},400),$(this).animate({top:t},400),i=!0)})}function sliderSidebar(){var e=$(window).height()/100,t=$("#sidebar").width(),i=2*e,s=null,n=!0;$("#sidebar").append('<div id="side-button" class="slideButton right">&laquo;</div>');var o=!0;$("#sidebar").addClass("opened"),$("#side-button").click(function(){t=$("#sidebar").width(),o?($("#sidebar").animate({left:-t},400,function(){$(this).removeClass("opened").addClass("closed")}),$(this).html("&raquo;").animate({left:t},400),o=!1):($("#sidebar").removeClass("closed").addClass("opened").animate({left:0},400),$(this).html("&laquo;").animate({left:t},400),o=!0)}),$("#sidebar").css("font-size",2*e),$("#sidebar-inner").width(t),$("#side-button").css("left",t),$("#blog-body").load("/blog/blog-index.html"),$(".option").each(function(){var e=$(this).attr("id");$("#"+e+" .option-title").attr("onclick","$(this).optionToggle()").addClass("collapsed")}),$(".expanded").removeClass("collapsed"),$(".expanded").next().slideDown(),$("[name='view']").change(function(){$("#blog-body").load("/blog/blog-"+$("[name='view'] :checked").val()+".html",function(){$(".text").trigger("keyup")})}),$("#side-resizer").mousedown(function(){$(document).mousemove(function(i){var s=i.pageX;t=s>34*e?s:t,$("#sidebar-inner").css({width:t-2*e}),$("#side-button").css({left:t-2*e,transition:"0s linear"})})}),$(document).bind("mouseup click",function(){$(document).unbind("mousemove"),$("#side-button").css({transition:""})}),$("#side-button").click(function(){"0px"==$("#sidebar").css("left")&&$("#sidebar").hasClass("opened")?($("#side-button").addClass("triggered"),n=!0):$("#side-button").removeClass("targeted")}),$(window).bind("mousemove scroll",function(e){clearTimeout(s),n===!0&&$(".closed #side-button").addClass("triggered").animate({left:t},100),e.pageX<2*t/3?$(".closed #side-button").addClass("targeted"):$(".closed #side-button").removeClass("targeted"),n=!1,s=setTimeout(function(){$("#side-button").removeClass("triggered"),$(".closed #side-button:not(:hover):not(.targeted)").animate({left:t-i},1500),$(".closed #side-button.targeted:not(:hover)").animate({left:t-2*i},3e3,function(){$("#side-button").removeClass("targeted")}),n=!0},4e3)})}function tryit(){sliderSidebar(),$(window).mousemove()}function show_notifications(){$("#notifications").toggle(350)}function mark_read(e){$.ajax({url:"/include/ajax_handler.php",data:{action:"mark_read",notification_id:e},type:"post",success:function(){}})}function mark_all_read(e){$.ajax({url:"/include/ajax_handler.php",data:{action:"mark_all_read",user_id:e},type:"post",success:function(){location.reload()}})}Array.prototype.last=function(e){return this[this.length-(e>=1&&e<this.length?e:1)]},Message.prototype.assign=function(e,t){return this.msg=e,t||this.type?this.type=t||this.type:console.error("Type is undefined"),this},Message.prototype.show=function(e){var t={error:" invalid",correct:" valid",notification:""},i=this.el;if(this.elType=t[this.type]||this.type,i.className=i.className.match(/(invalid|valid)/)?i.className.replace(/ (invalid|valid)/,this.elType):i.className+this.elType,i.nextElementSibling&&i.nextElementSibling.className.match(/(error|correct|notification)/))i.nextElementSibling.className.match(/(error|correct|notification)/)&&this.replace();else{var s="<div class='note "+this.type+"'>"+this.msg+"</div>";i.insertAdjacentHTML("afterend",s)}return"function"==typeof e&&e(),this},Message.prototype.replace=function(e){var t=this.el.nextElementSibling;return t&&(t.className=t.className.replace(/(error|correct|notification)/,this.type),t.innerHTML=this.msg,this.el.className=this.el.className.replace(/ (invalid|valid)/,this.elType)),"function"==typeof e&&e(),this},Message.prototype.hide=function(e){var t=this.el.nextElementSibling;return t&&t.className.match(/(^|\s)(error|correct|notification)($|\s)/)&&this.el.parentNode.removeChild(t),"function"==typeof e&&e(),this},Message.prototype.purge=function(e){return this.hide(),this.el.className=this.el.className.replace(/(^|\s)(invalid|valid)($|\s)/,"$3"),"function"==typeof e&&e(),this},function(e){e.fn.popUp=function(t){var i=this,s=i.css("top");return this.css("top",t),e(".overlay-wrapper").css({"pointer-events":"all","background-color":"rgba(255, 255, 255, 0.5)"}),e(".overlay-wrapper").click(function(){i.css("top",s),e(".overlay-wrapper").css({"pointer-events":"","background-color":""})}),e("#credits").click(function(e){e.stopPropagation()}),this},e.fn.scrollTo=function(t){return t=t||1e3,e("html, body").animate({scrollTop:this.offset().top},t),this},e.fn.optionToggle=function(){e(this).next().slideToggle();var t=e(this);return t.hasClass("collapsed")?t.removeClass("collapsed").addClass("expanded"):t.removeClass("expanded").addClass("collapsed"),this},e.fn.styleRandomColor=function(){var e=randomColor();return this.prev(".text").val(e).trigger("keyup"),this.next(".color-picker").spectrum("set",e),this}}(jQuery),$(function(){$("#notifications").hide(),$("body").click(function(e){0===$(e.target).closest(".notification-link, #notifications").length&&$("#notifications").hide("fast","swing")})});
